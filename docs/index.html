<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Post-Processing for Conservation Planning Solutions to Ensure Minimum Patch Sizes • minpatch</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Post-Processing for Conservation Planning Solutions to Ensure Minimum Patch Sizes">
<meta name="description" content='Implements the MinPatch algorithm for post-processing conservation planning solutions from prioritizr to ensure all protected areas meet user-defined minimum size thresholds. Based on the methodology described in Smith et al. (2010) "An approach for ensuring minimum protected area size in systematic conservation planning". The package provides functions to remove small patches, add new patches to meet conservation targets, and remove unnecessary planning units while maintaining minimum patch sizes and conservation objectives.'>
<meta property="og:description" content='Implements the MinPatch algorithm for post-processing conservation planning solutions from prioritizr to ensure all protected areas meet user-defined minimum size thresholds. Based on the methodology described in Smith et al. (2010) "An approach for ensuring minimum protected area size in systematic conservation planning". The package provides functions to remove small patches, add new patches to meet conservation targets, and remove unnecessary planning units while maintaining minimum patch sizes and conservation objectives.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">minpatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/minpatch.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/boundary-penalty.html">Boundary penalty in MinPatch</a></li>
    <li><a class="dropdown-item" href="articles/minpatch-oceandatr-Seychelles.html">Using oceandatr and minpatch to reduce fragmentation in a marine planning region (Seychelles)</a></li>
    <li><a class="dropdown-item" href="articles/minpatchTasmania.html">MinPatch in Tasmania</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SpatialPlanning/minpatch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="minpatch-for-r">MinPatch for R<a class="anchor" aria-label="anchor" href="#minpatch-for-r"></a>
</h1></div>
<!-- badges: start -->

<p><strong>Note: This is still a work in progress and significant bugs may be present. Use with caution</strong></p>
<p>More information on the original implemention of MinPatch for Marxan and QGIS is available here: <a href="https://cluz-systematic-conservation-planning.github.io" class="external-link uri">https://cluz-systematic-conservation-planning.github.io</a></p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>An R implementation of the MinPatch algorithm for post-processing conservation planning solutions to ensure minimum protected area sizes.</p>
<p>MinPatch is a post-processing tool for conservation planning solutions that ensures all protected areas meet user-defined minimum size thresholds. This R package implements the methodology described in Smith et al. (2010) and is designed to work with solutions from the <code>prioritizr</code> package, though it can work with any binary conservation solution.</p>
<div class="section level3">
<h3 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h3>
<p>Conservation planning software like Marxan and prioritizr can produce solutions with many small, fragmented protected areas. While these solutions may be mathematically optimal, small protected areas are often:</p>
<ul>
<li>Less ecologically viable</li>
<li>More expensive to manage</li>
<li>More vulnerable to edge effects</li>
<li>Less resilient to disturbances</li>
</ul>
</div>
<div class="section level3">
<h3 id="the-solution">The Solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h3>
<p>MinPatch addresses this by post-processing conservation solutions through three stages:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Remove Small Patches</strong>: Eliminate protected areas smaller than a minimum size threshold</li>
<li>
<strong>Add New Patches</strong>: Add new areas to meet conservation targets using the BestPatch algorithm</li>
<li>
<strong>Simulated Whittling</strong>: Remove unnecessary planning units while maintaining constraints</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"SpatialPlanning/minpatch"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<ul>
<li>
<strong>Full MinPatch Algorithm</strong>: Complete implementation of all three stages</li>
<li>
<strong>prioritizr Integration</strong>: Seamless workflow with prioritizr solutions</li>
<li>
<strong>Locked Constraints Support</strong>: Automatically respects locked-in and locked-out constraints from prioritizr</li>
<li>
<strong>Flexible Parameters</strong>: Control minimum patch sizes, patch radius, and boundary penalties</li>
<li>
<strong>Comprehensive Reporting</strong>: Detailed statistics and comparisons</li>
<li>
<strong>Visualization Support</strong>: Plot results with ggplot2 (optional)</li>
</ul>
</div>
<div class="section level2">
<h2 id="algorithm-details">Algorithm Details<a class="anchor" aria-label="anchor" href="#algorithm-details"></a>
</h2>
<div class="section level3">
<h3 id="locked-constraints">Locked Constraints<a class="anchor" aria-label="anchor" href="#locked-constraints"></a>
</h3>
<p>MinPatch automatically respects locked-in and locked-out constraints from prioritizr problems:</p>
<ul>
<li><p><strong>Locked-in constraints</strong> (from <code>add_locked_in_constraints()</code>): Planning units that are locked-in will never be removed, regardless of patch size or during the whittling stage. These units are treated as “conserved” areas that must be retained in the final solution.</p></li>
<li><p><strong>Locked-out constraints</strong> (from <code>add_locked_out_constraints()</code>): Planning units that are locked-out will never be selected, even when adding new patches to meet conservation targets. These units are completely excluded from consideration.</p></li>
</ul>
<p>If locked-in units form patches smaller than <code>min_patch_size</code>, a warning will be issued, but these units will still be preserved in the solution.</p>
</div>
<div class="section level3">
<h3 id="stage-1-remove-small-patches">Stage 1: Remove Small Patches<a class="anchor" aria-label="anchor" href="#stage-1-remove-small-patches"></a>
</h3>
<p>Identifies connected components (patches) in the solution and removes those smaller than the minimum size threshold. Locked-in planning units are never removed, even if they form small patches.</p>
</div>
<div class="section level3">
<h3 id="stage-2-add-new-patches-bestpatch-algorithm">Stage 2: Add New Patches (BestPatch Algorithm)<a class="anchor" aria-label="anchor" href="#stage-2-add-new-patches-bestpatch-algorithm"></a>
</h3>
<p>Uses the BestPatch scoring system to add new patches:</p>
<ol style="list-style-type: decimal">
<li>Calculate current conservation levels for each feature</li>
<li>Identify features with unmet targets</li>
<li>Score potential patches based on their contribution to targets relative to cost</li>
<li>Add the highest-scoring patch and repeat</li>
</ol>
<p>The BestPatch score is calculated as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>Score <span class="ot">=</span> Σ(feature_contribution <span class="sc">/</span> target_gap) <span class="sc">/</span> patch_cost</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-3-simulated-whittling">Stage 3: Simulated Whittling<a class="anchor" aria-label="anchor" href="#stage-3-simulated-whittling"></a>
</h3>
<p>Removes unnecessary planning units through an iterative process:</p>
<ol style="list-style-type: decimal">
<li>Identify edge units (on the boundary of selected areas)</li>
<li>Calculate whittling scores based on feature importance</li>
<li>Remove units that don’t violate constraints:
<ul>
<li>Must not cause targets to be unmet</li>
<li>Must not make patches too small</li>
<li>Must not increase total cost (if boundary penalty &gt; 0)</li>
<li>Must not split patches into non-viable pieces</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use this package, please cite both the original paper and this implementation:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>Smith, R.J., Di Minin, E., Linke, S., Segan, D.B., Possingham, <span class="fu">H.P.</span> (<span class="dv">2010</span>). </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>An approach <span class="cf">for</span> ensuring minimum protected area size <span class="cf">in</span> systematic conservation planning. </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>Biological Conservation, <span class="dv">143</span>(<span class="dv">10</span>), <span class="dv">2525</span><span class="fl">-2531.</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>Everett J.D., Richardson A.J., Smith <span class="fu">R.J.</span> (<span class="dv">2025</span>). _minpatch<span class="sc">:</span> Post<span class="sc">-</span>Processing <span class="cf">for</span> Conservation Planning Solutions to Ensure Minimum Patch</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  Sizes_. R package version <span class="dv">0</span>.<span class="fl">1.0</span>, <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>SpatialPlanning<span class="sc">/</span>minpatch<span class="sc">&gt;</span>.</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>GPL (&gt;= 3)</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Smith, R.J., Di Minin, E., Linke, S., Segan, D.B., Possingham, H.P. (2010). An approach for ensuring minimum protected area size in systematic conservation planning. <em>Biological Conservation</em>, 143(10), 2525-2531.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<ul>
<li>Check the package vignette: <code><a href="articles/minpatch.html">vignette("minpatch")</a></code>
</li>
<li>View function documentation: <code><a href="reference/run_minpatch.html">?run_minpatch</a></code>
</li>
<li>Report bugs: <a href="https://github.com/SpatialPlanning/minpatch/issues" class="external-link">GitHub Issues</a>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/SpatialPlanning/minpatch/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/SpatialPlanning/minpatch/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing minpatch</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jason D. Everett <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6681-8054" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Anthony J. Richardson <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9289-7366" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Robert J. Smith <br><small class="roles"> Author </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/SpatialPlanning/minpatch/actions/workflows/Windows.yaml" class="external-link"><img src="https://github.com/SpatialPlanning/minpatch/actions/workflows/Windows.yaml/badge.svg" alt="Windows"></a></li>
<li><a href="https://github.com/SpatialPlanning/minpatch/actions/workflows/Ubuntu.yaml" class="external-link"><img src="https://github.com/SpatialPlanning/minpatch/actions/workflows/Ubuntu.yaml/badge.svg" alt="Ubuntu"></a></li>
<li><a href="https://github.com/SpatialPlanning/minpatch/actions/workflows/MacOS.yaml" class="external-link"><img src="https://github.com/SpatialPlanning/minpatch/actions/workflows/MacOS.yaml/badge.svg" alt="MacOS"></a></li>
<li><a href="https://github.com/SpatialPlanning/minpatch/issues" class="external-link"><img src="https://img.shields.io/github/issues/SpatialPlanning/minpatch" alt="issues - zoomss"></a></li>
<li><a href="https://app.codecov.io/gh/SpatialPlanning/minpatch" class="external-link"><img src="https://codecov.io/gh/SpatialPlanning/minpatch/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason D. Everett, Anthony J. Richardson, Robert J. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
