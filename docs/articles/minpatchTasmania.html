<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MinPatch in Tasmania • minpatch</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MinPatch in Tasmania">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">minpatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/minpatch.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/minpatchTasmania.html">MinPatch in Tasmania</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/yourusername/minpatch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MinPatch in Tasmania</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/yourusername/minpatch/blob/HEAD/vignettes/minpatchTasmania.Rmd" class="external-link"><code>vignettes/minpatchTasmania.Rmd</code></a></small>
      <div class="d-none name"><code>minpatchTasmania.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="load-packages">Load packages<a class="anchor" aria-label="anchor" href="#load-packages"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yourusername/minpatch" class="external-link">minpatch</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://prioritizr.net" class="external-link">prioritizr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://prioritizr.github.io/prioritizrdata/" class="external-link">prioritizrdata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load data</span></span>
<span><span class="va">tas_pu</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://prioritizr.github.io/prioritizrdata/reference/tas_data.html" class="external-link">get_tas_pu</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cost <span class="op">=</span> <span class="va">cost</span><span class="op">*</span><span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># At present minpatch works with sf objects. Here we convert the data to sf.</span></span>
<span><span class="va">tas_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://prioritizr.github.io/prioritizrdata/reference/tas_data.html" class="external-link">get_tas_features</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">stars</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/stars/reference/st_as_stars.html" class="external-link">st_as_stars</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tas</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/interpolate_aw.html" class="external-link">st_interpolate_aw</a></span><span class="op">(</span><span class="va">tas_features</span>, <span class="va">tas_pu</span>, extensive <span class="op">=</span> <span class="cn">FALSE</span>, keep_NA <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_join.html" class="external-link">st_join</a></span><span class="op">(</span><span class="va">tas_pu</span>, join <span class="op">=</span> <span class="va">st_equals</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in st_interpolate_aw.sf(tas_features, tas_pu, extensive = FALSE, :</span></span>
<span><span class="co">#&gt; st_interpolate_aw assumes attributes are constant or uniform over areas of x</span></span>
<span></span>
<span></span>
<span><span class="va">features</span> <span class="op">=</span> <span class="va">tas</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cost"</span>, <span class="st">"locked_in"</span>, <span class="st">"locked_out"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert data to binary again</span></span>
<span><span class="va">tas</span> <span class="op">&lt;-</span> <span class="va">tas</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span><span class="va">features</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">.x</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-prioritizr-analysis">Run prioritizr analysis<a class="anchor" aria-label="anchor" href="#run-prioritizr-analysis"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://prioritizr.net/reference/problem.html" class="external-link">problem</a></span><span class="op">(</span><span class="va">tas</span>, features <span class="op">=</span> <span class="va">features</span>, cost_column <span class="op">=</span> <span class="st">"cost"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://prioritizr.net/reference/add_min_set_objective.html" class="external-link">add_min_set_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://prioritizr.net/reference/add_relative_targets.html" class="external-link">add_relative_targets</a></span><span class="op">(</span><span class="fl">0.30</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># 30% of each feature</span></span>
<span>  <span class="fu"><a href="https://prioritizr.net/reference/add_binary_decisions.html" class="external-link">add_binary_decisions</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://prioritizr.net/reference/add_default_solver.html" class="external-link">add_default_solver</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="plot-prioritizr-solution">Plot prioritizr solution<a class="anchor" aria-label="anchor" href="#plot-prioritizr-solution"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/plot_prioritizr.html">plot_prioritizr</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></span></code></pre></div>
<p><img src="minpatchTasmania_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="minpatch">MinPatch<a class="anchor" aria-label="anchor" href="#minpatch"></a>
</h2>
<div class="section level3">
<h3 id="choose-a-patch-size">Choose a patch size<a class="anchor" aria-label="anchor" href="#choose-a-patch-size"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Calculate reasonable parameters based on planning unit characteristics</span></span>
<span><span class="va">median_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">tas</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set minimum patch size to 5x median planning unit area</span></span>
<span><span class="va">min_patch_size</span> <span class="op">&lt;-</span> <span class="va">median_area</span> <span class="op">*</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Set patch radius to encompass approximately 10 planning units</span></span>
<span><span class="va">patch_radius</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">median_area</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"MinPatch parameters:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; MinPatch parameters:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Minimum patch size:"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">min_patch_size</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"square meters\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Minimum patch size: 324514429 square meters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- Patch radius:"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">patch_radius</span>,<span class="fl">3</span><span class="op">)</span>, <span class="st">"meters\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - Patch radius: 25476.04 meters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"- This means patches must be at least"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">min_patch_size</span><span class="op">/</span><span class="va">median_area</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>    <span class="st">"times the median planning unit size\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; - This means patches must be at least 5 times the median planning unit size</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-minpatch">Run minpatch<a class="anchor" aria-label="anchor" href="#run-minpatch"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minpatch.html">run_minpatch</a></span><span class="op">(</span></span>
<span>  prioritizr_problem <span class="op">=</span> <span class="va">p</span>,</span>
<span>  prioritizr_solution <span class="op">=</span> <span class="va">s</span>,</span>
<span>  min_patch_size <span class="op">=</span> <span class="va">min_patch_size</span>,</span>
<span>  patch_radius <span class="op">=</span> <span class="va">patch_radius</span>,</span>
<span>  remove_small_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  whittle_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Validating inputs...</span></span>
<span><span class="co">#&gt; Initializing data structures...</span></span>
<span><span class="co">#&gt; Calculating boundary matrix (this may take a while)...</span></span>
<span><span class="co">#&gt; Processed 100 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 200 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 300 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 400 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 500 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 600 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 700 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 800 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 900 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 1000 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 1100 of 1128 planning units</span></span>
<span><span class="co">#&gt; Creating patch radius dictionary...</span></span>
<span><span class="co">#&gt; Processed 100 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 200 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 300 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 400 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 500 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 600 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 700 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 800 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 900 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 1000 of 1128 planning units</span></span>
<span><span class="co">#&gt; Processed 1100 of 1128 planning units</span></span>
<span><span class="co">#&gt; Calculating initial patch statistics...</span></span>
<span><span class="co">#&gt; Stage 1: Removing small patches...</span></span>
<span><span class="co">#&gt; Stage 2: Adding new patches...</span></span>
<span><span class="co">#&gt;   Initial unmet targets: 30 </span></span>
<span><span class="co">#&gt;   Unmet feature IDs: 1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33 </span></span>
<span><span class="co">#&gt;   Iteration 1 - Unmet targets: 30 </span></span>
<span><span class="co">#&gt;     Found 875 potential patches with scores</span></span>
<span><span class="co">#&gt;     Best score: 1.440508e-05 for unit 79 </span></span>
<span><span class="co">#&gt;     Added patch centered on unit 79 </span></span>
<span><span class="co">#&gt;   Iteration 2 - Unmet targets: 29 </span></span>
<span><span class="co">#&gt;     Found 873 potential patches with scores</span></span>
<span><span class="co">#&gt;     Best score: 7.880797e-06 for unit 421 </span></span>
<span><span class="co">#&gt;     Added patch centered on unit 421 </span></span>
<span><span class="co">#&gt;   Iteration 3 - Unmet targets: 27 </span></span>
<span><span class="co">#&gt;     Found 864 potential patches with scores</span></span>
<span><span class="co">#&gt;     Best score: 5.751114e-06 for unit 387 </span></span>
<span><span class="co">#&gt;     Added patch centered on unit 387 </span></span>
<span><span class="co">#&gt;   Iteration 4 - Unmet targets: 26 </span></span>
<span><span class="co">#&gt;     Found 859 potential patches with scores</span></span>
<span><span class="co">#&gt;     Best score: 4.461179e-06 for unit 362 </span></span>
<span><span class="co">#&gt;     Added patch centered on unit 362 </span></span>
<span><span class="co">#&gt;   Iteration 5 - Unmet targets: 23 </span></span>
<span><span class="co">#&gt;     Found 850 potential patches with scores</span></span>
<span><span class="co">#&gt;     Best score: 3.090659e-06 for unit 246 </span></span>
<span><span class="co">#&gt;     Added patch centered on unit 246 </span></span>
<span><span class="co">#&gt;   Iteration 10 - Unmet targets: 17 </span></span>
<span><span class="co">#&gt;   All conservation targets are now met!</span></span>
<span><span class="co">#&gt; Stage 3: Removing unnecessary planning units...</span></span>
<span><span class="co">#&gt;     Edge units found: 427 </span></span>
<span><span class="co">#&gt;     Keystone units: 0 </span></span>
<span><span class="co">#&gt;     New keystone units: 15 </span></span>
<span><span class="co">#&gt;     Scoreable units: 412 </span></span>
<span><span class="co">#&gt;     Unit 66 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Edge units found: 411 </span></span>
<span><span class="co">#&gt;     Keystone units: 16 </span></span>
<span><span class="co">#&gt;     New keystone units: 0 </span></span>
<span><span class="co">#&gt;     Scoreable units: 411 </span></span>
<span><span class="co">#&gt;     Unit 420 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Edge units found: 410 </span></span>
<span><span class="co">#&gt;     Keystone units: 17 </span></span>
<span><span class="co">#&gt;     New keystone units: 0 </span></span>
<span><span class="co">#&gt;     Scoreable units: 410 </span></span>
<span><span class="co">#&gt;     Unit 246 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Edge units found: 409 </span></span>
<span><span class="co">#&gt;     Keystone units: 18 </span></span>
<span><span class="co">#&gt;     New keystone units: 0 </span></span>
<span><span class="co">#&gt;     Scoreable units: 409 </span></span>
<span><span class="co">#&gt;     Unit 419 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Edge units found: 408 </span></span>
<span><span class="co">#&gt;     Keystone units: 19 </span></span>
<span><span class="co">#&gt;     New keystone units: 0 </span></span>
<span><span class="co">#&gt;     Scoreable units: 408 </span></span>
<span><span class="co">#&gt;     Unit 438 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Unit 439 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Unit 111 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Unit 537 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Unit 864 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;     Unit 926 cannot be removed - adding to keystone set</span></span>
<span><span class="co">#&gt;   Whittling iteration 100 </span></span>
<span><span class="co">#&gt;   Whittling iteration 200 </span></span>
<span><span class="co">#&gt;   Whittling iteration 300 </span></span>
<span><span class="co">#&gt;   Whittling iteration 400 </span></span>
<span><span class="co">#&gt;   No more edge units to consider - terminating</span></span>
<span><span class="co">#&gt; Calculating final statistics...</span></span>
<span><span class="co">#&gt; MinPatch processing complete!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualise-the-minpatch-solution">Visualise the minpatch solution<a class="anchor" aria-label="anchor" href="#visualise-the-minpatch-solution"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result</span>, title <span class="op">=</span> <span class="st">"MinPatch Results"</span><span class="op">)</span></span></code></pre></div>
<p><img src="minpatchTasmania_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="analyse-the-final-results">Analyse the final results<a class="anchor" aria-label="anchor" href="#analyse-the-final-results"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_minpatch_summary.html">print_minpatch_summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; === MinPatch Processing Summary ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Patch Statistics:</span></span>
<span><span class="co">#&gt;   Initial patches: 58 (valid: 11)</span></span>
<span><span class="co">#&gt;   Final patches: 12 (valid: 11)</span></span>
<span><span class="co">#&gt;   Area change: 4378267698.40 (21.8%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cost Breakdown:</span></span>
<span><span class="co">#&gt;   Planning unit cost: 68792497.20</span></span>
<span><span class="co">#&gt;   Boundary cost: 0.00</span></span>
<span><span class="co">#&gt;   Total cost: 68792497.20</span></span>
<span><span class="co">#&gt;   Selected units: 427</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Feature Representation:</span></span>
<span><span class="co">#&gt;   Total features: 33</span></span>
<span><span class="co">#&gt;   Targets met: 33</span></span>
<span><span class="co">#&gt;   Targets unmet: 0</span></span>
<span><span class="co">#&gt;   Mean proportion: 0.449</span></span>
<span><span class="co">#&gt;   Total shortfall: 0.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === End Summary ===</span></span>
<span></span>
<span><span class="co"># Compare original vs MinPatch solutions</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_solutions.html">compare_solutions</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print overall comparison</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== Overall Solution Comparison ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Overall Solution Comparison ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">$</span><span class="va">overall</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        Metric    Original    MinPatch     Change Percent_Change</span></span>
<span><span class="co">#&gt; 1     Selected Planning Units         330         427         97       29.39394</span></span>
<span><span class="co">#&gt; 2                  Total Area 20052333083 24430600782 4378267698       21.83421</span></span>
<span><span class="co">#&gt; 3           Number of Patches          58          12        -46      -79.31034</span></span>
<span><span class="co">#&gt; 4 Valid Patches (&gt;= min size)          11          11          0        0.00000</span></span>
<span><span class="co">#&gt; 5           Median Patch Size    64915437   661924221  597008784      919.67152</span></span>
<span><span class="co">#&gt; 6          Planning Unit Cost    68792497    68792497          0        0.00000</span></span>
<span><span class="co">#&gt; 7               Boundary Cost           0           0          0             NA</span></span>
<span><span class="co">#&gt; 8                  Total Cost    68792497    68792497          0        0.00000</span></span>
<span></span>
<span><span class="co"># Print feature-level comparison</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Feature-Level Area Comparison ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Feature-Level Area Comparison ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">$</span><span class="va">features</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Feature_ID Target Original_Area MinPatch_Area Area_Change Percent_Change</span></span>
<span><span class="co">#&gt; 1           1    1.2             2             4           2     100.000000</span></span>
<span><span class="co">#&gt; 2           2   33.0            35            39           4      11.428571</span></span>
<span><span class="co">#&gt; 3           3    2.7             3             6           3     100.000000</span></span>
<span><span class="co">#&gt; 4           4  170.1           177           197          20      11.299435</span></span>
<span><span class="co">#&gt; 5           5  213.9           221           260          39      17.647059</span></span>
<span><span class="co">#&gt; 6           6  242.1           250           317          67      26.800000</span></span>
<span><span class="co">#&gt; 7           7    9.9            12            13           1       8.333333</span></span>
<span><span class="co">#&gt; 8           8  108.3           113           137          24      21.238938</span></span>
<span><span class="co">#&gt; 9           9   30.9            41            53          12      29.268293</span></span>
<span><span class="co">#&gt; 10         10  260.4           271           339          68      25.092251</span></span>
<span><span class="co">#&gt; 11         11   62.4            67            82          15      22.388060</span></span>
<span><span class="co">#&gt; 12         12  132.0           151           190          39      25.827815</span></span>
<span><span class="co">#&gt; 13         13  133.5           138           163          25      18.115942</span></span>
<span><span class="co">#&gt; 14         14  122.4           128           137           9       7.031250</span></span>
<span><span class="co">#&gt; 15         15   62.4            66            76          10      15.151515</span></span>
<span><span class="co">#&gt; 16         16  240.0           246           310          64      26.016260</span></span>
<span><span class="co">#&gt; 17         17    0.3             1             1           0       0.000000</span></span>
<span><span class="co">#&gt; 18         18   27.6            29            29           0       0.000000</span></span>
<span><span class="co">#&gt; 19         19    6.6             8             8           0       0.000000</span></span>
<span><span class="co">#&gt; 20         20   18.0            19            25           6      31.578947</span></span>
<span><span class="co">#&gt; 21         21   24.3            31            41          10      32.258065</span></span>
<span><span class="co">#&gt; 22         22    7.5            12            13           1       8.333333</span></span>
<span><span class="co">#&gt; 23         23   34.5            39            54          15      38.461538</span></span>
<span><span class="co">#&gt; 24         24   11.1            12            12           0       0.000000</span></span>
<span><span class="co">#&gt; 25         25   47.1            51            77          26      50.980392</span></span>
<span><span class="co">#&gt; 26         26    9.3            11            11           0       0.000000</span></span>
<span><span class="co">#&gt; 27         27   86.7            88           102          14      15.909091</span></span>
<span><span class="co">#&gt; 28         28    6.6             7            12           5      71.428571</span></span>
<span><span class="co">#&gt; 29         29    1.2             2             2           0       0.000000</span></span>
<span><span class="co">#&gt; 30         30  186.0           192           195           3       1.562500</span></span>
<span><span class="co">#&gt; 31         31   66.3            71            97          26      36.619718</span></span>
<span><span class="co">#&gt; 32         32   30.9            36            49          13      36.111111</span></span>
<span><span class="co">#&gt; 33         33   57.9            60            67           7      11.666667</span></span>
<span><span class="co">#&gt;    Original_Target_Met MinPatch_Target_Met Original_Proportion</span></span>
<span><span class="co">#&gt; 1                 TRUE                TRUE            1.666667</span></span>
<span><span class="co">#&gt; 2                 TRUE                TRUE            1.060606</span></span>
<span><span class="co">#&gt; 3                 TRUE                TRUE            1.111111</span></span>
<span><span class="co">#&gt; 4                 TRUE                TRUE            1.040564</span></span>
<span><span class="co">#&gt; 5                 TRUE                TRUE            1.033193</span></span>
<span><span class="co">#&gt; 6                 TRUE                TRUE            1.032631</span></span>
<span><span class="co">#&gt; 7                 TRUE                TRUE            1.212121</span></span>
<span><span class="co">#&gt; 8                 TRUE                TRUE            1.043398</span></span>
<span><span class="co">#&gt; 9                 TRUE                TRUE            1.326861</span></span>
<span><span class="co">#&gt; 10                TRUE                TRUE            1.040707</span></span>
<span><span class="co">#&gt; 11                TRUE                TRUE            1.073718</span></span>
<span><span class="co">#&gt; 12                TRUE                TRUE            1.143939</span></span>
<span><span class="co">#&gt; 13                TRUE                TRUE            1.033708</span></span>
<span><span class="co">#&gt; 14                TRUE                TRUE            1.045752</span></span>
<span><span class="co">#&gt; 15                TRUE                TRUE            1.057692</span></span>
<span><span class="co">#&gt; 16                TRUE                TRUE            1.025000</span></span>
<span><span class="co">#&gt; 17                TRUE                TRUE            3.333333</span></span>
<span><span class="co">#&gt; 18                TRUE                TRUE            1.050725</span></span>
<span><span class="co">#&gt; 19                TRUE                TRUE            1.212121</span></span>
<span><span class="co">#&gt; 20                TRUE                TRUE            1.055556</span></span>
<span><span class="co">#&gt; 21                TRUE                TRUE            1.275720</span></span>
<span><span class="co">#&gt; 22                TRUE                TRUE            1.600000</span></span>
<span><span class="co">#&gt; 23                TRUE                TRUE            1.130435</span></span>
<span><span class="co">#&gt; 24                TRUE                TRUE            1.081081</span></span>
<span><span class="co">#&gt; 25                TRUE                TRUE            1.082803</span></span>
<span><span class="co">#&gt; 26                TRUE                TRUE            1.182796</span></span>
<span><span class="co">#&gt; 27                TRUE                TRUE            1.014994</span></span>
<span><span class="co">#&gt; 28                TRUE                TRUE            1.060606</span></span>
<span><span class="co">#&gt; 29                TRUE                TRUE            1.666667</span></span>
<span><span class="co">#&gt; 30                TRUE                TRUE            1.032258</span></span>
<span><span class="co">#&gt; 31                TRUE                TRUE            1.070890</span></span>
<span><span class="co">#&gt; 32                TRUE                TRUE            1.165049</span></span>
<span><span class="co">#&gt; 33                TRUE                TRUE            1.036269</span></span>
<span><span class="co">#&gt;    MinPatch_Proportion</span></span>
<span><span class="co">#&gt; 1             3.333333</span></span>
<span><span class="co">#&gt; 2             1.181818</span></span>
<span><span class="co">#&gt; 3             2.222222</span></span>
<span><span class="co">#&gt; 4             1.158142</span></span>
<span><span class="co">#&gt; 5             1.215521</span></span>
<span><span class="co">#&gt; 6             1.309376</span></span>
<span><span class="co">#&gt; 7             1.313131</span></span>
<span><span class="co">#&gt; 8             1.265005</span></span>
<span><span class="co">#&gt; 9             1.715210</span></span>
<span><span class="co">#&gt; 10            1.301843</span></span>
<span><span class="co">#&gt; 11            1.314103</span></span>
<span><span class="co">#&gt; 12            1.439394</span></span>
<span><span class="co">#&gt; 13            1.220974</span></span>
<span><span class="co">#&gt; 14            1.119281</span></span>
<span><span class="co">#&gt; 15            1.217949</span></span>
<span><span class="co">#&gt; 16            1.291667</span></span>
<span><span class="co">#&gt; 17            3.333333</span></span>
<span><span class="co">#&gt; 18            1.050725</span></span>
<span><span class="co">#&gt; 19            1.212121</span></span>
<span><span class="co">#&gt; 20            1.388889</span></span>
<span><span class="co">#&gt; 21            1.687243</span></span>
<span><span class="co">#&gt; 22            1.733333</span></span>
<span><span class="co">#&gt; 23            1.565217</span></span>
<span><span class="co">#&gt; 24            1.081081</span></span>
<span><span class="co">#&gt; 25            1.634820</span></span>
<span><span class="co">#&gt; 26            1.182796</span></span>
<span><span class="co">#&gt; 27            1.176471</span></span>
<span><span class="co">#&gt; 28            1.818182</span></span>
<span><span class="co">#&gt; 29            1.666667</span></span>
<span><span class="co">#&gt; 30            1.048387</span></span>
<span><span class="co">#&gt; 31            1.463047</span></span>
<span><span class="co">#&gt; 32            1.585761</span></span>
<span><span class="co">#&gt; 33            1.157168</span></span>
<span></span>
<span><span class="co"># Print summary statistics</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Feature Change Summary ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Feature Change Summary ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span>
<span><span class="co">#&gt;   features_improved features_reduced features_unchanged targets_gained</span></span>
<span><span class="co">#&gt; 1                27                0                  6              0</span></span>
<span><span class="co">#&gt;   targets_lost</span></span>
<span><span class="co">#&gt; 1            0</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="run-different-patch-sizes">Run different patch sizes<a class="anchor" aria-label="anchor" href="#run-different-patch-sizes"></a>
</h2>
<p>The minimum patch size parameter is the core constraint that drives
MinPatch behaviour - it determines the threshold below which patches are
considered too small and must be either enlarged or removed.</p>
<ul>
<li>During Stage 1, MinPatch removes all patches smaller than this
threshold (except existing protected areas).</li>
<li>During Stage 2, it adds new patches large enough to meet this
minimum when targets are unmet.</li>
<li>During Stage 3 (whittling), it prevents the removal of planning
units that would make any patch fall below this threshold.</li>
</ul>
<p>Larger minimum patch sizes result in fewer, bigger patches with
potentially higher total area, as MinPatch must ensure every patch meets
the size requirement. Smaller minimum patch sizes allow more
flexibility, potentially resulting in more patches that are closer to
the original <em>prioritizr</em> solution. The choice of minimum patch
size should reflect ecological or management considerations - for
example, larger patches may be needed to support viable populations or
reduce edge effects, while smaller patches may be acceptable in highly
connected landscapes or for features that don’t require large contiguous
areas.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Calculate reasonable parameters based on planning unit characteristics</span></span>
<span><span class="va">median_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">tas</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">min_patch_size</span> <span class="op">&lt;-</span> <span class="va">median_area</span> <span class="op">*</span> <span class="fl">10</span></span>
<span><span class="va">patch_radius</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">median_area</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minpatch.html">run_minpatch</a></span><span class="op">(</span></span>
<span>  prioritizr_problem <span class="op">=</span> <span class="va">p</span>,</span>
<span>  prioritizr_solution <span class="op">=</span> <span class="va">s</span>,</span>
<span>  min_patch_size <span class="op">=</span> <span class="va">min_patch_size</span>,</span>
<span>  patch_radius <span class="op">=</span> <span class="va">patch_radius</span>,</span>
<span>  remove_small_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  whittle_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">median_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">tas</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">min_patch_size</span> <span class="op">&lt;-</span> <span class="va">median_area</span> <span class="op">*</span> <span class="fl">20</span></span>
<span><span class="va">patch_radius</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">median_area</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minpatch.html">run_minpatch</a></span><span class="op">(</span></span>
<span>  prioritizr_problem <span class="op">=</span> <span class="va">p</span>,</span>
<span>  prioritizr_solution <span class="op">=</span> <span class="va">s</span>,</span>
<span>  min_patch_size <span class="op">=</span> <span class="va">min_patch_size</span>,</span>
<span>  patch_radius <span class="op">=</span> <span class="va">patch_radius</span>,</span>
<span>  remove_small_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  whittle_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="visualise-the-minpatch-solution-1">Visualise the minpatch solution<a class="anchor" aria-label="anchor" href="#visualise-the-minpatch-solution-1"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span><span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result</span>, title <span class="op">=</span> <span class="st">"Patch Size x5"</span><span class="op">)</span>,</span>
<span>                      <span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result2</span>, title <span class="op">=</span> <span class="st">"Patch Size x10"</span><span class="op">)</span>,</span>
<span>                      <span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result3</span>, title <span class="op">=</span> <span class="st">"Patch Size x20"</span><span class="op">)</span>,</span>
<span>                      guides <span class="op">=</span> <span class="st">"collect"</span>,</span>
<span>                      ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="minpatchTasmania_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="run-different-boundary-penalties">Run different Boundary Penalties<a class="anchor" aria-label="anchor" href="#run-different-boundary-penalties"></a>
</h2>
<p>The boundary penalty controls how much MinPatch prioritizes spatial
compactness during the “simulated whittling” stage. During whittling,
MinPatch considers removing planning units from patch edges, but only if
doing so doesn’t increase the total <em>priortizr</em> cost. The
boundary penalty affects this decision by penalizing fragmented
solutions - higher penalties favour more compact patches by making it
costly to create additional “edge” between selected and unselected
areas. When MinPatch evaluates whether to remove a unit, it calculates
the change in boundary length (units with selected neighbours increase
boundary when removed, while units with unselected neighbours decrease
boundary) and multiplies this by the boundary penalty. If the resulting
boundary cost change exceeds the unit’s cost, the unit cannot be
removed. In datasets like Tasmania with long planning unit boundaries
relative to unit costs, even small boundary penalties can be highly
influential, potentially preventing most unit removals and resulting in
similar solutions across different penalty values. Very small penalties
(e.g., 1e-10) may be needed to see meaningful differences in such
cases.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Calculate reasonable parameters based on planning unit characteristics</span></span>
<span><span class="va">median_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">median</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">tas</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">min_patch_size</span> <span class="op">&lt;-</span> <span class="va">median_area</span> <span class="op">*</span> <span class="fl">5</span></span>
<span><span class="va">patch_radius</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">median_area</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minpatch.html">run_minpatch</a></span><span class="op">(</span></span>
<span>  prioritizr_problem <span class="op">=</span> <span class="va">p</span>,</span>
<span>  prioritizr_solution <span class="op">=</span> <span class="va">s</span>,</span>
<span>  min_patch_size <span class="op">=</span> <span class="va">min_patch_size</span>,</span>
<span>  patch_radius <span class="op">=</span> <span class="va">patch_radius</span>,</span>
<span>  boundary_penalty <span class="op">=</span> <span class="fl">1e-5</span>,</span>
<span>  remove_small_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  whittle_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">result5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minpatch.html">run_minpatch</a></span><span class="op">(</span></span>
<span>  prioritizr_problem <span class="op">=</span> <span class="va">p</span>,</span>
<span>  prioritizr_solution <span class="op">=</span> <span class="va">s</span>,</span>
<span>  min_patch_size <span class="op">=</span> <span class="va">min_patch_size</span>,</span>
<span>  patch_radius <span class="op">=</span> <span class="va">patch_radius</span>,</span>
<span>  boundary_penalty <span class="op">=</span> <span class="fl">1e-10</span>, </span>
<span>  remove_small_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  whittle_patches <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="visualise-the-minpatch-solution-2">Visualise the minpatch solution<a class="anchor" aria-label="anchor" href="#visualise-the-minpatch-solution-2"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span><span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result</span>, title <span class="op">=</span> <span class="st">"Boundary Penalty: 0"</span><span class="op">)</span>,</span>
<span>                      <span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result4</span>, title <span class="op">=</span> <span class="st">"Boundary Penalty: 1e-5"</span><span class="op">)</span>,</span>
<span>                      <span class="fu"><a href="../reference/plot_minpatch.html">plot_minpatch</a></span><span class="op">(</span><span class="va">result5</span>, title <span class="op">=</span> <span class="st">"Boundary Penalty: 1e-10"</span><span class="op">)</span>,</span>
<span>                      guides <span class="op">=</span> <span class="st">"collect"</span>,</span>
<span>                      ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="minpatchTasmania_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason D. Everett, Anthony J. Richardson, Robert J. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
